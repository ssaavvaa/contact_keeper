(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{38:function(e,t,a){e.exports=a(79)},43:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},71:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(33),l=a.n(c),o=(a(43),a(10)),u=Object(n.createContext)(),s=Object(n.createContext)(),i=function(e){var t=e.title,a=e.icon,c=Object(n.useContext)(u),l=Object(n.useContext)(s),i=c.isAuthenticated,p=c.logout,m=c.user,d=l.clearContacts,E=r.a.createElement(n.Fragment,null,r.a.createElement("li",{className:"Link"},"Hello ",m&&m.name),r.a.createElement("li",null,r.a.createElement(o.b,{className:"Link",to:"/add_contact"},"Add contact")),r.a.createElement("li",null,r.a.createElement("a",{className:"Link",href:"#!",onClick:function(){p(),d()}},r.a.createElement("i",{className:"fas fa-sign-out-alt"}),"logout"))),f=r.a.createElement(n.Fragment,null,r.a.createElement("li",null,r.a.createElement(o.b,{className:"Link",to:"/register"},"Register")),r.a.createElement("li",null,r.a.createElement(o.b,{className:"Link",to:"/login"},"Login")));return r.a.createElement("div",{className:"NavBar"},r.a.createElement("h1",null,r.a.createElement("i",{className:a,style:{color:"white"}})," ",t),r.a.createElement("ul",null,i?E:f))};i.defaultProps={title:"Contact Keeper",icon:"fas fa-id-card-alt"};var p=i,m=a(14),d=(a(48),a(15)),E=function(e){var t=e.contact,a=Object(n.useContext)(s),c=t.name,l=t._id,u=t.email,i=t.phone,p=t.type,m=a.deleteContact,d=a.setCurrent,E=a.clearCurrent;return r.a.createElement("div",null,r.a.createElement("div",{className:"card"},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("h3",{className:""},c,": "),r.a.createElement("span",{className:"badge ".concat("professional"===p?"badge-secondary":"badge-primary"," ")},p.charAt(0).toUpperCase()+p.slice(1))),r.a.createElement("ul",null,u&&r.a.createElement("li",null,r.a.createElement("i",{style:{color:"white",marginRight:"10px"},className:"fas fa-envelope-open"}),u),i&&r.a.createElement("li",null,r.a.createElement("i",{style:{color:"white",marginRight:"10px"},className:"fas fa-phone"}),i)),r.a.createElement(o.b,{to:"/add_contact"}," ",r.a.createElement("button",{className:"edit_button",onClick:function(){d(t)}},"edit")),r.a.createElement("button",{className:"delete_button",onClick:function(){m(l),E()}},"delete")))};E.prototype={contact:a.n(d).a.object.isRequired};var f=E,h=(a(49),function(){return r.a.createElement(n.Fragment,null,r.a.createElement("img",{src:"https://media.giphy.com/media/GWbbdCgJhLRC0/giphy.gif",alt:"loading",className:"spinner"}))}),C=function(){var e=Object(n.useContext)(s),t=e.contacts,a=e.filtered,c=e.getContacts,l=e.loading;return Object(n.useEffect)(function(){c()},[]),t.length||l?r.a.createElement(n.Fragment,null,null===t||l?r.a.createElement(h,null):null!==a?a.map(function(e){return r.a.createElement(f,{key:e._id,contact:e})}):t.map(function(e){return r.a.createElement(f,{key:e._id,contact:e})})):r.a.createElement("div",{className:"noContacts"},r.a.createElement("h2",null,"You currently have no contacts"),r.a.createElement("p",null,"Please add some contacts"))},b=(a(50),function(){var e=Object(n.useContext)(s),t=Object(n.useRef)(""),a=e.filterContacts,c=e.clearFilter,l=e.filtered;Object(n.useEffect)(function(){null===l&&(t.current.value="")});return r.a.createElement("form",null,r.a.createElement("input",{className:"filterInput",ref:t,type:"text",placeholder:"Search in contacts...",onChange:function(e){""!==t.current.value?a(e.target.value):c()}}))}),y=(a(51),function(){var e=Object(n.useContext)(u);return Object(n.useEffect)(function(){e.loadUser()},[]),r.a.createElement(n.Fragment,null,r.a.createElement(b,null),r.a.createElement("div",{className:"Home"},r.a.createElement(C,null)))}),g=(a(52),function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"About this App"),r.a.createElement("p",{className:"my-1"},"This is a full stack React App for keeping contacts"),r.a.createElement("p",{className:"about-paragraph"},r.a.createElement("strong",null,"Version:"),"1.0.0"))}),v=a(3),O=a.n(v),R=a(11),T=a(6),j=a(7),A=a.n(j),_=a(16),x=a(1),N=function(e,t){switch(t.type){case"ADD_CONTACT":return Object(x.a)({},e,{contacts:[t.payload].concat(Object(_.a)(e.contacts)),loading:!1});case"DELETE_CONTACT":var a=e.contacts.filter(function(e){return e._id!==t.payload});return Object(x.a)({},e,{contacts:a,loading:!1});case"SET_CURRENT":return Object(x.a)({},e,{current:t.payload});case"GET_CONTACTS":return Object(x.a)({},e,{contacts:t.payload,loading:!1});case"CLEAR_CURRENT":return Object(x.a)({},e,{current:null,loading:!1});case"CLEAR_CONTACTS":return Object(x.a)({},e,{current:null,filtered:null,contacts:[]});case"UPDATE_CONTACT":return Object(x.a)({},e,{loading:!1,contacts:e.contacts.map(function(e){return e._id===t.payload._id?t.payload:e})});case"FILTER_CONTACT":return Object(x.a)({},e,{filtered:e.contacts.filter(function(e){var a=new RegExp("".concat(t.payload),"gi");return e.name.match(a)||e.email.match(a)})});case"CLEAR_FILTER":return Object(x.a)({},e,{filtered:null});case"CONTACT_ERROR":return Object(x.a)({},e,{error:t.payload,loading:!1});default:return e}},w=function(e){var t=Object(n.useReducer)(N,{contacts:[],current:null,filtered:null,error:null}),a=Object(T.a)(t,2),c=a[0],l=a[1],o=function(){var e=Object(R.a)(O.a.mark(function e(t){var a;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.a.get("/api/contacts");case 3:a=e.sent,l({type:"GET_CONTACTS",payload:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),l({type:"CONTACT_ERROR",payload:e.t0.response.msg});case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(R.a)(O.a.mark(function e(t){var a,n;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,A.a.post("/api/contacts",t,a);case 4:n=e.sent,l({type:"ADD_CONTACT",payload:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),l({type:"CONTACT_ERROR",payload:e.t0.response.msg});case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(R.a)(O.a.mark(function e(t){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.a.delete("/api/contacts/".concat(t));case 3:l({type:"DELETE_CONTACT",payload:t}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),l({type:"CONTACT_ERROR",payload:e.t0.response.msg});case 9:l({type:"DELETE_CONTACT",payload:t});case 10:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(R.a)(O.a.mark(function e(t){var a,n;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,A.a.put("/api/contacts/".concat(t._id),t,a);case 4:n=e.sent,l({type:"UPDATE_CONTACT",payload:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),l({type:"CONTACT_ERROR",payload:e.t0.response.msg});case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(s.Provider,{value:{contacts:c.contacts,current:c.current,filtered:c.filtered,error:c.error,addContact:u,deleteContact:i,setCurrent:function(e){l({type:"SET_CURRENT",payload:e})},clearCurrent:function(){l({type:"CLEAR_CURRENT"})},updateContact:p,filterContacts:function(e){l({type:"FILTER_CONTACT",payload:e})},clearFilter:function(){l({type:"CLEAR_FILTER"})},getContacts:o,clearContacts:function(){l({type:"CLEAR_CONTACTS"})}}},e.children)},k=function(e,t){switch(t.type){case"USER_LOADED":return Object(x.a)({},e,{isAuthenticated:!0,loading:!1,user:t.payload});case"LOGIN_SUCCESS":case"REGISTER_SUCCESS":return localStorage.setItem("token",t.payload.token),Object(x.a)({},e,{token:t.payload.token,isAuthenticated:!0,loading:!1});case"LOG_OUT":case"LOGIN_FAIL":case"AUTH_ERROR":case"REGISTER_FAIL":return localStorage.removeItem("token"),Object(x.a)({},e,{token:null,isAuthenticated:!1,loading:!1,user:null,error:t.payload});case"CLEAR_ERRORS":return Object(x.a)({},e,{error:null});default:return e}},S=function(e){e?A.a.defaults.headers.common["x-auth-token"]=e:delete A.a.defaults.headers.common["x-auth-token"]},L=function(e){var t={token:localStorage.getItem("token"),isAuthenticated:null,loading:!0,error:null,user:null},a=Object(n.useReducer)(k,t),c=Object(T.a)(a,2),l=c[0],o=c[1],s=function(){var e=Object(R.a)(O.a.mark(function e(){var t;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.token&&S(localStorage.token),e.prev=1,e.next=4,A.a.get("/api/auth");case 4:t=e.sent,o({type:"USER_LOADED",payload:t.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),o({type:"AUTH_ERROR"});case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(R.a)(O.a.mark(function e(t){var a,n;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,A.a.post("api/users",t,a);case 4:n=e.sent,o({type:"REGISTER_SUCCESS",payload:n.data}),s(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),o({type:"REGISTER_FAIL",payload:e.t0.response.data.msg});case 12:case"end":return e.stop()}},e,null,[[1,9]])}));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(R.a)(O.a.mark(function e(t){var a,n;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,A.a.post("api/auth",t,a);case 4:n=e.sent,o({type:"LOGIN_SUCCESS",payload:n.data}),s(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),o({type:"LOGIN_FAIL",payload:e.t0.response.data.msg});case 12:case"end":return e.stop()}},e,null,[[1,9]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(u.Provider,{value:{token:l.token,isAuthenticated:l.isAuthenticated,loading:l.loading,error:l.error,user:l.user,register:i,clearErrors:function(){return o({type:"CLEAR_ERRORS"})},loadUser:s,login:p,logout:function(){return o({type:"LOG_OUT"})}}},e.children)},F=a(12),I=(a(71),function(e){var t=Object(n.useContext)(s),a=t.current,c=t.clearCurrent,l=t.updateContact,o=Object(n.useState)({name:"",email:"",phone:"",type:"personal"}),u=Object(T.a)(o,2),i=u[0],p=u[1];Object(n.useEffect)(function(){null!==a&&p(a)},[]);var m=function(e){return p(Object(x.a)({},i,Object(F.a)({},e.target.name,e.target.value)))},d=function(a){a.preventDefault(),t.addContact(i),p({name:"",email:"",phone:"",type:"personal"}),e.history.push("/")},E=i.name,f=i.email,h=i.phone;return console.log(i),r.a.createElement("form",{className:"add-contact",onSubmit:d},r.a.createElement("input",{type:"text",name:"name",value:E,placeholder:"Name",onChange:m}),r.a.createElement("input",{type:"text",name:"email",value:f,placeholder:"Email",onChange:m}),r.a.createElement("input",{type:"text",name:"phone",value:h,placeholder:"Phone",onChange:m}),r.a.createElement("h5",null,"Contact Type : "),r.a.createElement("div",null,r.a.createElement("input",{type:"radio",name:"type",value:"personal",onChange:m}),r.a.createElement("label",null,"Personal")),r.a.createElement("div",null,r.a.createElement("input",{type:"radio",name:"type",value:"professional",onChange:m}),"Professional"," "),a&&r.a.createElement("button",{onClick:function(){c(),p({name:"",email:"",phone:"",type:"personal"})}},"Clear"),null===a?r.a.createElement("button",{type:"submit",onClick:d},"SUBMIT"):r.a.createElement("button",{onClick:function(t){t.preventDefault(),l(i),p({name:"",email:"",phone:"",type:"personal"}),e.history.push("/")}},"Update"))}),U=a(36),P=a.n(U),D=Object(n.createContext)(),G=function(e,t){switch(t.type){case"SET_ALERT":return[].concat(Object(_.a)(e),[t.payload]);case"REMOVE_ALERT":return e.filter(function(e){return e.id!==t.payload});default:return e}},q=function(e){var t=Object(n.useReducer)(G,[]),a=Object(T.a)(t,2),c=a[0],l=a[1];return r.a.createElement(D.Provider,{value:{alerts:c,setAlert:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,n=P.a.v4();l({type:"SET_ALERT",payload:{msg:e,type:t,id:n}}),setTimeout(function(){return l({type:"REMOVE_ALERT",payload:n})},a)}}},e.children)},H=(a(74),function(e){var t=Object(n.useContext)(D),a=Object(n.useContext)(u),c=t.setAlert,l=a.register,o=a.error,s=a.clearErrors,i=a.isAuthenticated;Object(n.useEffect)(function(){i&&e.history.push("/"),"User already exist"===o&&(c(o,"danger",3e3),s())},[o,i,e.history]);var p=Object(n.useState)({name:"",email:"",password:"",password_2:""}),m=Object(T.a)(p,2),d=m[0],E=m[1],f=function(e){return E(Object(x.a)({},d,Object(F.a)({},e.target.name,e.target.value)))},h=d.name,C=d.email,b=d.password,y=d.password_2;return r.a.createElement("div",{className:"register-wrapper"},r.a.createElement("h1",null,"Account Register"),r.a.createElement("form",{className:"register-container",onSubmit:function(e){return e.preventDefault(),""===h||null===h?c("Please enter a name","danger",3e3):/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(C)?b.length<5?c("Password length must be more than 5 characters!","danger",3e3):b!==y?c("Passwords don't match!","danger",3e3):void l({name:h,email:C,password:b}):c("Please enter a valid Email!","danger",3e3)}},r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{type:"text",name:"name",value:h,onChange:f,required:!0}),r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",name:"email",value:C,onChange:f,required:!0}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"text",name:"password",value:b,onChange:f,required:!0}),r.a.createElement("label",{htmlFor:"password_2"},"Confirm password"),r.a.createElement("input",{type:"text",name:"password_2",value:y,onChange:f,required:!0}),r.a.createElement("button",{type:"submit"}," Submit ")))}),B=(a(75),function(e){var t=Object(n.useContext)(D),a=Object(n.useContext)(u),c=t.setAlert,l=a.login,o=a.error,s=a.clearErrors,i=a.isAuthenticated;Object(n.useEffect)(function(){i&&e.history.push("/"),"invalid credentials"===o&&(c(o,"danger",3e3),s())},[o,i,e.history]);var p=Object(n.useState)({email:"",password:""}),m=Object(T.a)(p,2),d=m[0],E=m[1],f=function(e){return E(Object(x.a)({},d,Object(F.a)({},e.target.name,e.target.value)))},h=d.email,C=d.password;return r.a.createElement("div",{className:"login-wrapper"},r.a.createElement("h1",null,"Account Login"),r.a.createElement("form",{className:"login-container",onSubmit:function(e){return e.preventDefault(),""===h||null===h?c("Please enter an Email!","danger",3e3):""===C||null===C?c("Please enter a password!","danger",3e3):void l({email:h,password:C})}},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",name:"email",value:h,onChange:f}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"text",name:"password",value:C,onChange:f}),r.a.createElement("button",{type:"submit"}," Submit ")))}),J=(a(76),function(){var e=Object(n.useContext)(D);return e.alerts.length>0&&e.alerts.map(function(e){return r.a.createElement("div",{key:e.id,className:"alertRed"},r.a.createElement("i",{className:"fas fa-info-circle",style:{marginRight:10}}),e.msg)})}),M=a(37),V=function(e){var t=e.component,a=Object(M.a)(e,["component"]),c=Object(n.useContext)(u),l=c.isAuthenticated,o=c.loading;return r.a.createElement(m.b,Object.assign({},a,{render:function(e){return l||o?r.a.createElement(t,e):r.a.createElement(m.a,{to:"/login"})}}))};a(77),a(78);localStorage.token&&S(localStorage.token);var K=function(){return r.a.createElement(L,null,r.a.createElement(w,null,r.a.createElement(q,null,r.a.createElement(o.a,null,r.a.createElement(n.Fragment,null,r.a.createElement(p,null),r.a.createElement("div",{className:"container"},r.a.createElement(J,null),r.a.createElement(m.d,null,r.a.createElement(V,{exact:!0,path:"/",component:y}),r.a.createElement(m.b,{exact:!0,path:"/about",component:g}),r.a.createElement(m.b,{exact:!0,path:"/add_contact",component:I}),r.a.createElement(m.b,{exact:!0,path:"/register",component:H}),r.a.createElement(m.b,{exact:!0,path:"/login",component:B}))))))))};l.a.render(r.a.createElement(K,null),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.fcfb7786.chunk.js.map